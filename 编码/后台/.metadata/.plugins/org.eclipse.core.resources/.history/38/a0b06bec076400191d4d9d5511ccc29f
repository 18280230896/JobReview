<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.llg.mapper.WorkMapper">
	<resultMap type="Work" id="work">
		<id property="id" column="work_id"/>
		<result property="name" column="work_name"/>
		<result property="codePath" column="code_path"/>
		<result property="picPath" column="pic_path"/>
		<association property="subject" javaType="Subject">
			<id property="id" column="subject_id"/>
		</association>
		<association property="student" javaType="Student">
			<id property="id" column="student_id"/>
		</association>
		<association property="group" javaType="Group">
			<id property="id" column="group_id"/>
		</association>
	</resultMap>

	<insert id="addWork" parameterType="Work">
		insert into t_work values(null,#{subject.id},#{student.id},#{group.id},#{name},#{codePath},#{picPath})
	</insert>
	
	<delete id="deleteWork" parameterType="Integer">
		delete from t_work where work_id = #{id}
	</delete>
	
	<select id="getWorkBySId" parameterType="Integer" resultMap="work">
		select * from t_work where subject_id = #{0} and student_id = #{1}
	</select>
	
	<select id="getWorkByGId" parameterType="Integer" resultMap="work">
		select * from t_work where subject_id = #{0} and group_id = #{1}
	</select>
	
	<select id="getWorkById" parameterType="Integer" resultMap="work">
		select * from t_work where subject_id = #{0}
	</select>
	
	<update id="updateWork" parameterType="Work">
		update t_work set
		work_name = #{name},
		code_path = #{codePath},
		pic_path = #{picPath}
		where work_id = #{id}
	</update>
</mapper>