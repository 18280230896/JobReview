var ctid = $("#ctid").val();
var task;
var classTask;
getTaskInfo();
showClassTask();

function getTaskInfo(){
	$.ajax({
		url:"teacherGetClassTask.action",
		type:"post",
		data:{"ctid":ctid},
		dataType:"json",
		async:false,
		success:function(result){
			if(result.status == 1){
				task = result.task;
				classTask = result.classTask;
			}
		}
	});
}

function showClassTask(){
	console.log(task);
	var length = task.subjects.length;
	if(length == 0){
		prohibit();
		return;
	}
	$(".content-list").css("width",length+"00%");
	for(var i=0;i<length;i++){
		var newLi = $("<li class='content'></li>");
		var newSubject = $("<div class='subject'><h4>"+(i+1)+"、"+task.subjects[i].name+"</h4></div>")
		newLi.append(newSubject);
		if(classTask.type === 2){
			//显示分工信息
			var division = getDivision(task.subjects[i].id);
			var newfengong = $("<div class='fengong'></div>");
			newLi.append(newfengong);
		}
		$(".content-list").append(newLi);
		$(".content").css("width",100/length+"%");
		$(".prevSubject").prop("disabled","disabled");
		if(length == 1) $(".nextSubject").prop("disabled","disabled");
	}
	if(classTask.type === 2) {
		nowDivision = getDivision(task.subjects[0].id);
		showDivision(0,nowDivision);
	}
	submitIsdisabled();
	getAndShowCode(task.subjects[0].id);
}
